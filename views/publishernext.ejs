<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ride Successful!</title>
    <link rel="stylesheet" href="../public/publisher2.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://api.mapbox.com/mapbox-gl-js/v3.2.0/mapbox-gl.css" rel="stylesheet">
    <script src="https://api.mapbox.com/mapbox-gl-js/v3.2.0/mapbox-gl.js"></script>
    <script src="https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-geocoder/v5.0.0/mapbox-gl-geocoder.min.js"></script>
    <link rel="stylesheet" href="https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-geocoder/v5.0.0/mapbox-gl-geocoder.css" type="text/css">
    <link rel="stylesheet" href="../public/publishernext.css">
</head>

<body style="
background-color: #EFEAE3;
background-image: url(bgimage2.jpg);
background-repeat: no-repeat;
background-size: cover;">
<div id="main">
    <div id="page1">
        <nav>
            <div style="
            display:flex;
            justify-content: space-between;">
                <img id="logo-image" onclick=
                "window.location.href = '/home'" src="../public/unidrive-high-resolution-logo-transparent.png"
                alt="" style="cursor:pointer;">
            <div id="nav-part2">
                <button class="nav-butt" onclick=
                "window.location.href = '/passenger'"><a >Request a Ride</a></button>
                <button class="nav-butt" onclick=
                "window.location.href = '/publisher'" style="
                background-color: #227C70;
                color: #EFEAE3;"><a >Publish a Ride</a></button>
                <button class="nav-butt" onclick=
                "window.location.href = '/account'"><a >Profile</a></button>
            </div>
            <h3>Menu</h3>
            </div>
        </nav>
        <div id="success-prompt">
            Ride Published Successfully!
        </div>
        
        <button onclick="refreshPage()">Refresh</button>
    </div>
    <div>
        <p>Name: <span id="name"></span></p>
        <p>Email: <span id="email"></span></p>
        <p>Location Link: <a id="location-link" href="#" target="_blank">View on Map</a></p>
    </div>
    
</div>
<script src="../public/publisher.js"></script>
    <script data-cfasync="false" src="/cdn-cgi/scripts/5c5dd728/cloudflare-static/email-decode.min.js"></script>
    <script src="https://code.jquery.com/jquery-1.10.2.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.0/dist/js/bootstrap.bundle.min.js"></script>
    <script type="text/javascript">
        function refreshPage() {
            window.location.reload();
        }

        function fetchRiderData() {
            fetch("/rider_data_want")
                .then((response) => {
                    if (!response.ok) {
                        throw new Error('Failed to fetch rider data');
                    }
                    return response.json();
                })
                .then((data) => {
                    const information = data;
                    mail=data.remail;
                    console.log(data);
                    linkk = `https://www.google.com/maps?q=${data.rlocation2[1]},${data.rlocation2[0]}`;
                    fname = `${data.rfirstname} ${data.rlastname}`;
                    console.log(mail);
                    console.log(linkk);
                    console.log(fname);
                    document.getElementById("name").textContent = fname;
            document.getElementById("email").textContent = mail;
            document.getElementById("location-link").href = linkk;
                })
                .catch((error) => {
                    console.error('Error fetching rider data:', error);
                });
        }

        // Call the fetchRiderData function when the page loads
        window.onload = fetchRiderData;
    </script>
</body>

</html>